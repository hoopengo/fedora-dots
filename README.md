# FEDORA36 STARTING UP

> Привет, перед началом этого гайда хотел бы сказать, что я делал его под себя и вам он может не подходить. Не стоит следовать каждому пункту и устанавливать то софт который вам не нужен.

| [Источник](https://vk.com/@plafonvk-fedorazero) | [Разметка дисков](https://vk.com/video-211011902_456239066) |

## Создание загрузочной флешки

1. Установливаем [Ventoy](https://github.com/ventoy/Ventoy/releases) или Fedora Media Writer. На крайняк [Rufus](https://rufus.ie/)
2. Запустите Ventoy и [создайте мультизагрузочную флешку](https://youtu.be/88RS7H0p8kQ) или загрузите образ через другие программы.
3. Скачайте [Fedora](https://getfedora.org/ru/workstation/download/) или [Nobara](https://nobaraproject.org/) (многое пофикшено, но я свовил достаточно багов чтобы отказаться от этого решения. Добавлю также, что некоторые пункты из этого гайда выполнять на Nobara не нужно! К примеру `nvidia.sh` и `games.sh`)

## Установка Fedora36

Если у вас есть пункт `Выбор программ`, тогда выбираем там Fedora Workstation и нажимаем готово. 

<img src="sources/progs-label.png" />

Если есть пункт `Имя сети и узла`, и он горит ошибкой, то выбираем там ваш wifi-адаптер и подключаемся к сети.

<img src="sources/wifi.png" />

Тут создаем root пользователя и своего личного. Ну или же можно дать root права вашему пользователю, для этого пропустите пункт `Учётная запись root` и убедитесь что стоит галочка на Выдать wheel права в пункте `Создание пользователя`

<img src="sources/usr.png" />

Если есть пункт `Источник установки`, выбираем ближайшее зеркало и нажимаем готово

<img src="sources/sources.png" />

## Разметка диска
Я решил вынести это в отдельный пункт, потому-что это самое важно.
1. Для начала выбираем те диски, которые вы хотите использовать.

<img src="sources/disks.png" />

2. Потом в способе разметки выбираем `Blivet-GUI`

<img src="sources/blivet-gui.png" />

3. Удаляем все разделы с дисков.
4. Создаём `efi` раздел. В файловой системе выбираем `Efi partition manager`

<img src="sources/boot-efi.png" />

5. Создаём `boot` раздел

<img src="sources/boot.png" />

6. Создаём `swap` на 8 гб (если не жалко) или на 5 гб (если жалко)

<img src="sources/swap.png" />

7. Для остального пространства размечаем btrfs без точки монтирования

<img src="sources/btrfs.png" />

8. Создаём субвалюмы в правильной последовательность

<img src="sources/log.png" />

<img src="sources/home.png" />

<img src="sources/dir.png" />

9. Проверяем их правильность.

<img src="sources/all-btrfs.png" />

10. Если есть ещё диски, размечаем их `ext4` и в точке монтирования пишем `/mnt/{ваше_имя}`, для примера у меня стоит `/mnt/disk1`

## Настройка `fstab`
Тут нужно быть осторожнее. 
Для начала делаем копию нашего fstab на всякий случай. `cp /etc/fstab ~/fstab-copy`
Дальше нужно вставить строчку в наши субвалюмы `,defaults,noatime,discard=async`, после чего сохранить файл и прописать sudo reboot.

<img src="sources/fstab.jpg" />

Если система не запускается или входит в "безопасный режим", то:
1. Выключаем компьютер
2. При запуске зажимаем SHIFT
3. Выбираем fedora из списка и нажимаем `e`
4. В конце дописываем `single init=/bin/bash`
5. Также заменяем `ro` на `rw`
6. У вас могут не работать консольные команды, поэтому пишем `sudo su`, `/usr/bin/nano ~/fstab-copy`, копируем всё содержимое. `/usr/bin/nano /etc/fstab`, заменяем содержимое на то что скопировали.
7. Сохраняем файл и пишем `sudo reboot -f -f`
8. Система перезапуститься и должна начать работать.

## Батарея
Заходим в настройки батареи и выключаем всё что вас должно тревожить

<img src="sources/battery-settings.png" />

## Игры
Запустите `sh games.sh`, после запустите steam и залогиньтесь. Дальше зайдите в ProtonUP-Qt и скачайте последнюю версию proton-ge (Дальше она появиться в compatibility в свойствах игры в стиме. Вы должны будете выбрать её). Также вы сможете запускать пиратские игры через lutris.

- Если вы изменили местоположение библиотеки стим, чтобы он запускал игры добавьте путь до неё в flatseal. Для примера `~/games` или `/mnt/disk1/games` 

<img src="sources/flatseal-steamfix.jpg" />
